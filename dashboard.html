<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Dashboard - EM Luxury Cars</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body id="em-body" class="em-dashboard-body">
    
    <!-- Fixed Sidebar -->
    <aside class="em-sidebar" id="emSidebar">
        <div class="em-sidebar-header">
            <a href="index.html" class="em-sidebar-brand">
                <span class="em-logo-text">EM<span class="em-accent">.</span></span>
                <span class="em-brand-tagline">Luxury Cars</span>
            </a>
            <button class="em-sidebar-close d-lg-none" id="sidebarClose">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>
        
        <!-- User Profile Mini -->
        <div class="em-sidebar-user">
            <img src="https://via.placeholder.com/50" alt="User" class="em-sidebar-avatar" id="sidebarAvatar">
            <div class="em-sidebar-user-info">
                <h4 id="sidebarUserName">User</h4>
                <span class="em-user-badge"><i class="bi bi-gem"></i> Premium</span>
            </div>
        </div>
        
        <!-- Navigation -->
        <nav class="em-sidebar-nav">
            <ul class="nav flex-column">
                <li class="em-nav-label">Main</li>
                <li class="nav-item">
                    <a class="nav-link active" href="#" data-section="overview">
                        <i class="bi bi-grid-1x2"></i>
                        <span>Overview</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="orders">
                        <i class="bi bi-bag"></i>
                        <span>My Orders</span>
                        <span class="em-nav-badge" id="ordersBadge">0</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="rentals">
                        <i class="bi bi-car-front"></i>
                        <span>My Rentals</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="wishlist">
                        <i class="bi bi-heart"></i>
                        <span>Wishlist</span>
                        <span class="em-nav-badge" id="wishlistBadge">0</span>
                    </a>
                </li>
                
                <li class="em-nav-label">Account</li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="payments">
                        <i class="bi bi-credit-card"></i>
                        <span>Payment Methods</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="notifications">
                        <i class="bi bi-bell"></i>
                        <span>Notifications</span>
                        <span class="em-nav-badge em-badge-danger" id="notifBadge">0</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="settings">
                        <i class="bi bi-gear"></i>
                        <span>Settings</span>
                    </a>
                </li>
                
                <li class="em-nav-label">Quick Links</li>
                <li class="nav-item">
                    <a class="nav-link" href="inventory.html">
                        <i class="bi bi-shop"></i>
                        <span>Browse Cars</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="rent.html">
                        <i class="bi bi-calendar-check"></i>
                        <span>Rent a Car</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="parts.html">
                        <i class="bi bi-tools"></i>
                        <span>Car Parts</span>
                    </a>
                </li>
            </ul>
        </nav>
        
        <!-- Sidebar Footer -->
        <div class="em-sidebar-footer">
            <a href="#" class="em-logout-btn" onclick="logout()">
                <i class="bi bi-box-arrow-left"></i>
                <span>Logout</span>
            </a>
        </div>
    </aside>
    
    <!-- Main Content -->
    <main class="em-main-content">
        <!-- Top Bar -->
        <header class="em-topbar">
            <button class="em-menu-toggle d-lg-none" id="menuToggle">
                <i class="bi bi-list"></i>
            </button>
            
            <div class="em-topbar-search">
                <i class="bi bi-search"></i>
                <input type="text" placeholder="Search orders, rentals..." id="dashboardSearch">
            </div>
            
            <div class="em-topbar-actions">
                <a href="checkout.html" class="em-topbar-icon">
                    <i class="bi bi-cart3"></i>
                    <span class="em-icon-badge" id="cartBadge">0</span>
                </a>
                <button class="em-topbar-icon" data-section="notifications">
                    <i class="bi bi-bell"></i>
                    <span class="em-icon-badge em-badge-danger" id="topNotifBadge">0</span>
                </button>
                <div class="em-topbar-user">
                    <img src="https://via.placeholder.com/36" alt="User" id="topbarAvatar">
                    <span id="topbarUserName">User</span>
                </div>
            </div>
        </header>
        
        <!-- Dashboard Content -->
        <div class="em-dashboard-wrapper">
            
            <!-- Overview Section -->
            <section class="em-dashboard-section active" id="section-overview">
                <div class="em-section-header">
                    <div>
                        <h1>Welcome back, <span id="welcomeName">User</span>!</h1>
                        <p>Here's what's happening with your account today.</p>
                    </div>
                    <div class="em-header-actions">
                        <a href="inventory.html" class="btn em-btn-primary">
                            <i class="bi bi-plus"></i> Browse Cars
                        </a>
                    </div>
                </div>
                
                <!-- Stats Grid -->
                <div class="em-stats-grid">
                    <div class="em-stat-card">
                        <div class="em-stat-icon em-icon-blue">
                            <i class="bi bi-bag-check"></i>
                        </div>
                        <div class="em-stat-content">
                            <span class="em-stat-value" id="totalOrders">0</span>
                            <span class="em-stat-label">Total Orders</span>
                        </div>
                    </div>
                    <div class="em-stat-card">
                        <div class="em-stat-icon em-icon-green">
                            <i class="bi bi-car-front"></i>
                        </div>
                        <div class="em-stat-content">
                            <span class="em-stat-value" id="activeRentals">0</span>
                            <span class="em-stat-label">Active Rentals</span>
                        </div>
                    </div>
                    <div class="em-stat-card">
                        <div class="em-stat-icon em-icon-red">
                            <i class="bi bi-heart"></i>
                        </div>
                        <div class="em-stat-content">
                            <span class="em-stat-value" id="wishlistCount">0</span>
                            <span class="em-stat-label">Wishlist Items</span>
                        </div>
                    </div>
                    <div class="em-stat-card">
                        <div class="em-stat-icon em-icon-gold">
                            <i class="bi bi-wallet2"></i>
                        </div>
                        <div class="em-stat-content">
                            <span class="em-stat-value">$<span id="totalSpent">0</span></span>
                            <span class="em-stat-label">Total Spent</span>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="em-quick-actions">
                    <h3><i class="bi bi-lightning"></i> Quick Actions</h3>
                    <div class="em-actions-grid">
                        <a href="inventory.html" class="em-action-card">
                            <i class="bi bi-search"></i>
                            <span>Browse Cars</span>
                        </a>
                        <a href="rent.html" class="em-action-card">
                            <i class="bi bi-calendar-plus"></i>
                            <span>Book Rental</span>
                        </a>
                        <a href="parts.html" class="em-action-card">
                            <i class="bi bi-gear-wide-connected"></i>
                            <span>Shop Parts</span>
                        </a>
                        <a href="contact.html" class="em-action-card">
                            <i class="bi bi-headset"></i>
                            <span>Get Support</span>
                        </a>
                    </div>
                </div>
                
                <!-- Recent Activity -->
                <div class="em-content-grid">
                    <div class="em-panel">
                        <div class="em-panel-header">
                            <h3><i class="bi bi-clock-history"></i> Recent Orders</h3>
                            <a href="#" data-section="orders">View All</a>
                        </div>
                        <div class="em-panel-body" id="recentOrdersPanel">
                            <div class="em-empty-state">
                                <i class="bi bi-bag-x"></i>
                                <p>No orders yet</p>
                                <a href="inventory.html" class="btn em-btn-sm">Start Shopping</a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="em-panel">
                        <div class="em-panel-header">
                            <h3><i class="bi bi-car-front"></i> Active Rentals</h3>
                            <a href="#" data-section="rentals">View All</a>
                        </div>
                        <div class="em-panel-body" id="activeRentalsPanel">
                            <div class="em-empty-state">
                                <i class="bi bi-car-front"></i>
                                <p>No active rentals</p>
                                <a href="rent.html" class="btn em-btn-sm">Rent a Car</a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Orders Section -->
            <section class="em-dashboard-section" id="section-orders">
                <div class="em-section-header">
                    <div>
                        <h1>My Orders</h1>
                        <p>Track and manage your purchases</p>
                    </div>
                    <div class="em-filter-group">
                        <select class="form-select" id="orderFilter">
                            <option value="all">All Orders</option>
                            <option value="pending">Pending</option>
                            <option value="processing">Processing</option>
                            <option value="completed">Completed</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                </div>
                
                <div class="em-panel">
                    <div class="em-panel-body" id="allOrdersPanel">
                        <div class="em-empty-state">
                            <i class="bi bi-bag-x"></i>
                            <p>No orders found</p>
                            <a href="inventory.html" class="btn em-btn-primary">Start Shopping</a>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Rentals Section -->
            <section class="em-dashboard-section" id="section-rentals">
                <div class="em-section-header">
                    <div>
                        <h1>My Rentals</h1>
                        <p>Manage your car rentals</p>
                    </div>
                </div>
                
                <div class="em-panel mb-4">
                    <div class="em-panel-header">
                        <h3><i class="bi bi-car-front"></i> Active Rentals</h3>
                    </div>
                    <div class="em-panel-body" id="currentRentalsPanel">
                        <div class="em-empty-state">
                            <i class="bi bi-car-front"></i>
                            <p>No active rentals</p>
                            <a href="rent.html" class="btn em-btn-primary">Rent a Car</a>
                        </div>
                    </div>
                </div>
                
                <div class="em-panel">
                    <div class="em-panel-header">
                        <h3><i class="bi bi-clock-history"></i> Rental History</h3>
                    </div>
                    <div class="em-panel-body" id="rentalHistoryPanel">
                        <div class="em-empty-state">
                            <i class="bi bi-clock-history"></i>
                            <p>No rental history</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Wishlist Section -->
            <section class="em-dashboard-section" id="section-wishlist">
                <div class="em-section-header">
                    <div>
                        <h1>My Wishlist</h1>
                        <p>Items you've saved for later</p>
                    </div>
                </div>
                
                <div class="em-wishlist-grid" id="wishlistGrid">
                    <div class="em-empty-state-full">
                        <i class="bi bi-heart"></i>
                        <h3>Your wishlist is empty</h3>
                        <p>Save items you love by clicking the heart icon</p>
                        <a href="inventory.html" class="btn em-btn-primary">Browse Cars</a>
                    </div>
                </div>
            </section>
            
            <!-- Payment Methods Section -->
            <section class="em-dashboard-section" id="section-payments">
                <div class="em-section-header">
                    <div>
                        <h1>Payment Methods</h1>
                        <p>Manage your saved payment options</p>
                    </div>
                    <button class="btn em-btn-primary" data-bs-toggle="modal" data-bs-target="#addCardModal">
                        <i class="bi bi-plus"></i> Add Card
                    </button>
                </div>
                
                <div class="em-panel mb-4">
                    <div class="em-panel-header">
                        <h3><i class="bi bi-credit-card"></i> Saved Cards</h3>
                    </div>
                    <div class="em-panel-body" id="savedCardsPanel">
                        <div class="em-empty-state">
                            <i class="bi bi-credit-card"></i>
                            <p>No saved payment methods</p>
                        </div>
                    </div>
                </div>
                
                <div class="em-panel">
                    <div class="em-panel-header">
                        <h3><i class="bi bi-geo-alt"></i> Billing Addresses</h3>
                        <button class="btn em-btn-outline-sm" data-bs-toggle="modal" data-bs-target="#addAddressModal">
                            <i class="bi bi-plus"></i> Add
                        </button>
                    </div>
                    <div class="em-panel-body" id="addressesPanel">
                        <div class="em-empty-state">
                            <i class="bi bi-geo-alt"></i>
                            <p>No saved addresses</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Notifications Section -->
            <section class="em-dashboard-section" id="section-notifications">
                <div class="em-section-header">
                    <div>
                        <h1>Notifications</h1>
                        <p>Stay updated with your account activity</p>
                    </div>
                    <button class="btn em-btn-outline" id="markAllRead">
                        <i class="bi bi-check-all"></i> Mark All Read
                    </button>
                </div>
                
                <div class="em-panel">
                    <div class="em-panel-body" id="notificationsPanel">
                        <div class="em-empty-state">
                            <i class="bi bi-bell-slash"></i>
                            <p>No notifications</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Settings Section -->
            <section class="em-dashboard-section" id="section-settings">
                <div class="em-section-header">
                    <div>
                        <h1>Settings</h1>
                        <p>Manage your account preferences</p>
                    </div>
                </div>
                
                <!-- Profile Settings -->
                <div class="em-panel mb-4">
                    <div class="em-panel-header">
                        <h3><i class="bi bi-person"></i> Profile Information</h3>
                    </div>
                    <div class="em-panel-body">
                        <div class="em-profile-form">
                            <div class="em-profile-avatar-section">
                                <img src="https://via.placeholder.com/100" alt="Avatar" class="em-profile-avatar" id="settingsAvatar">
                                <div class="em-avatar-buttons">
                                    <label class="btn em-btn-outline-sm">
                                        <i class="bi bi-camera"></i> Change Photo
                                        <input type="file" accept="image/*" id="avatarInput" hidden>
                                    </label>
                                    <button type="button" class="btn em-btn-danger-sm" id="removeAvatarBtn" onclick="removeProfileImage()">
                                        <i class="bi bi-trash"></i> Remove
                                    </button>
                                </div>
                            </div>
                            <form id="profileForm" class="em-form-grid">
                                <div class="em-form-group">
                                    <label>Full Name</label>
                                    <input type="text" class="form-control" id="settingsName">
                                </div>
                                <div class="em-form-group">
                                    <label>Email Address</label>
                                    <input type="email" class="form-control" id="settingsEmail" readonly>
                                </div>
                                <div class="em-form-group">
                                    <label>Phone Number</label>
                                    <input type="tel" class="form-control" id="settingsPhone" placeholder="+1 (555) 000-0000">
                                </div>
                                <div class="em-form-group">
                                    <label>Date of Birth</label>
                                    <input type="date" class="form-control" id="settingsDob">
                                </div>
                                <div class="em-form-actions">
                                    <button type="submit" class="btn em-btn-primary">Save Changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Preferences -->
                <div class="em-panel mb-4">
                    <div class="em-panel-header">
                        <h3><i class="bi bi-sliders"></i> Preferences</h3>
                    </div>
                    <div class="em-panel-body">
                        <div class="em-toggle-list">
                            <div class="em-toggle-item">
                                <div class="em-toggle-info">
                                    <h4>Email Notifications</h4>
                                    <p>Receive order updates and promotions</p>
                                </div>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="emailNotif" checked>
                                </div>
                            </div>
                            <div class="em-toggle-item">
                                <div class="em-toggle-info">
                                    <h4>SMS Notifications</h4>
                                    <p>Receive rental reminders via SMS</p>
                                </div>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="smsNotif">
                                </div>
                            </div>
                            <div class="em-toggle-item">
                                <div class="em-toggle-info">
                                    <h4>Newsletter</h4>
                                    <p>Weekly updates on new arrivals</p>
                                </div>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="newsletter" checked>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Security -->
                <div class="em-panel">
                    <div class="em-panel-header">
                        <h3><i class="bi bi-shield-lock"></i> Security</h3>
                    </div>
                    <div class="em-panel-body">
                        <div class="em-security-list">
                            <div class="em-security-item">
                                <div class="em-security-info">
                                    <h4>Connected Account</h4>
                                    <p>Signed in with Google</p>
                                </div>
                                <span class="badge bg-success"><i class="bi bi-check-circle me-1"></i>Connected</span>
                            </div>
                            <div class="em-security-item em-danger">
                                <div class="em-security-info">
                                    <h4>Delete Account</h4>
                                    <p>Permanently delete your account</p>
                                </div>
                                <button class="btn btn-outline-danger btn-sm" data-bs-toggle="modal" data-bs-target="#deleteAccountModal">
                                    Delete
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
        </div>
    </main>
    
    <!-- Add Card Modal -->
    <div class="modal fade" id="addCardModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content em-modal">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-credit-card"></i> Add Payment Card</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addCardForm">
                        <div class="mb-3">
                            <label class="form-label">Card Number</label>
                            <input type="text" class="form-control" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" required>
                        </div>
                        <div class="row g-3">
                            <div class="col-6">
                                <label class="form-label">Expiry Date</label>
                                <input type="text" class="form-control" id="cardExpiry" placeholder="MM/YY" maxlength="5" required>
                            </div>
                            <div class="col-6">
                                <label class="form-label">CVV</label>
                                <input type="text" class="form-control" id="cardCvv" placeholder="123" maxlength="4" required>
                            </div>
                        </div>
                        <div class="mb-3 mt-3">
                            <label class="form-label">Cardholder Name</label>
                            <input type="text" class="form-control" id="cardName" required>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="setDefault">
                            <label class="form-check-label" for="setDefault">Set as default</label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn em-btn-outline" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn em-btn-primary" id="saveCardBtn">Add Card</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Change Password Modal -->
    <div class="modal fade" id="changePasswordModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content em-modal">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-shield-lock"></i> Change Password</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="changePasswordForm">
                        <div class="mb-3">
                            <label class="form-label">Current Password</label>
                            <input type="password" class="form-control" id="currentPassword" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">New Password</label>
                            <input type="password" class="form-control" id="newPassword" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Confirm New Password</label>
                            <input type="password" class="form-control" id="confirmNewPassword" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn em-btn-outline" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn em-btn-primary" id="changePasswordBtn">Update Password</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Address Modal -->
    <div class="modal fade" id="addAddressModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content em-modal">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-geo-alt"></i> Add Billing Address</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addAddressForm">
                        <div class="mb-3">
                            <label class="form-label">Address Label</label>
                            <input type="text" class="form-control" id="addressLabel" placeholder="Home, Office, etc." required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Street Address</label>
                            <input type="text" class="form-control" id="addressStreet" placeholder="123 Main St" required>
                        </div>
                        <div class="row g-3">
                            <div class="col-6">
                                <label class="form-label">City</label>
                                <input type="text" class="form-control" id="addressCity" required>
                            </div>
                            <div class="col-6">
                                <label class="form-label">State</label>
                                <input type="text" class="form-control" id="addressState" required>
                            </div>
                        </div>
                        <div class="mb-3 mt-3">
                            <label class="form-label">ZIP Code</label>
                            <input type="text" class="form-control" id="addressZip" required>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="setDefaultAddress">
                            <label class="form-check-label" for="setDefaultAddress">Set as default</label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn em-btn-outline" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn em-btn-primary" id="saveAddressBtn">Add Address</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Account Modal -->
    <div class="modal fade" id="deleteAccountModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content em-modal">
                <div class="modal-header">
                    <h5 class="modal-title text-danger"><i class="bi bi-exclamation-triangle"></i> Delete Account</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete your account? This action cannot be undone.</p>
                    <div class="mb-3">
                        <label class="form-label">Type "DELETE" to confirm</label>
                        <input type="text" class="form-control" id="deleteConfirm" placeholder="DELETE">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn em-btn-outline" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="deleteAccountBtn" disabled>Delete Account</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/pages/dashboard.js"></script>
</body>
</html>
